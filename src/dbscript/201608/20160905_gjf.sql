/*将工作流节点权限设置由绑定角色改为绑定操作员*/

CREATE TABLE syjzhpt.wf_node_userid (
  nodeuserid varchar(32) NOT NULL COMMENT '节点角色表ID',
  psbh varchar(50) DEFAULT NULL COMMENT '工作流编号',
  nodeid varchar(32) DEFAULT NULL COMMENT '节点ID',
  userid varchar(32) DEFAULT NULL COMMENT '角色ID',
  PRIMARY KEY (nodeuserid),
  INDEX idx_wf_node_userid_nodeid (nodeid),
  INDEX idx_wf_node_userid_psbh (psbh),
  INDEX idx_wf_node_userid_userid (userid)
)
ENGINE = INNODB
AUTO_INCREMENT = 460
AVG_ROW_LENGTH = 118
CHARACTER SET utf8
COLLATE utf8_general_ci
COMMENT = '节点操作员关系表';

  call PRC_INSERTCODE('USERKIND','用户类型','1','6','单位参保虚拟用户','199405',null,@P_CODE,@P_MSG);


UPDATE sysfunction set VISIBLE='0' WHERE title='工作流节点权限管理';

INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090110014543950082218', '/workflow/wf_node_useridIndex', '工作流节点权限设置', '9000', 1, '1', NULL, NULL, NULL, NULL, NULL, '1', 'wf_node_useridIndex', NULL, NULL, NULL, NULL, NULL, NULL, '', '');
INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090218264834296580833', '/workflow/queryWfnodeUserid', '查询工作流节点绑定的操作员信息', '2016090110014543950082218', 1, '2', NULL, NULL, NULL, NULL, NULL, '1', 'queryWfnodeUserid', NULL, NULL, NULL, NULL, NULL, NULL, '', '');
INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090218284864449715538', '/workflow/wf_node_roleAddUseridIndex', '工作流节点操作员绑定页面', '2016090110014543950082218', 1, '2', NULL, NULL, NULL, NULL, NULL, '1', 'wf_node_roleAddUseridIndex', NULL, NULL, NULL, NULL, NULL, NULL, '', '');
INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090218294910617646520', '/workflow/queryWfnodeNoUserid', '查询工作流节点没有的权限', '2016090110014543950082218', 1, '2', NULL, NULL, NULL, NULL, NULL, '1', 'queryWfnodeNoUserid', NULL, NULL, NULL, NULL, NULL, NULL, '', '');
INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090218310848953011077', '/workflow/addWfnodeUserid', '新增工作流节点权限保存', '2016090110014543950082218', 1, '2', NULL, NULL, NULL, NULL, NULL, '1', 'addWfnodeUserid', NULL, NULL, NULL, NULL, NULL, NULL, '', '');
INSERT INTO syjzhpt.sysfunction(FUNCTIONID, LOCATION, TITLE, PARENT, ORDERNO, TYPE, DESCRIPTION, LOG, OWNER, ACTIVE, FUNCTIONCODE, VISIBLE, BIZID, ROLBIZCLASS, IMAGEURL, EXPANDEDIMAGEURL, AAA102, CAE005, ROLBIZABLE, TARGET, SYSTEMCODE) VALUES
('2016090509114068367415253', '/workflow/delWfnodeUserid', '删除工作流节点操作员绑定', '2016090110014543950082218', 1, '2', NULL, NULL, NULL, NULL, NULL, '1', 'delWfnodeUserid', NULL, NULL, NULL, NULL, NULL, NULL, '', '');


